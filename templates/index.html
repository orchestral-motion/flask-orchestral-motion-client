<html>
<head>
    <title>Create positions - Orchestral Motion</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="/static/websocketbridge.js"></script>
</head>
<body>
    <h1>Create a position</h1>
    <button>Now!</button>
    <script>
        $(function () {
            var ws_path =  "wss://murmuring-dawn-85833.herokuapp.com/stream/";
            var ul = $("#events ul");
            console.log("Connecting to " + ws_path);
            console.log("Writing to " + ul);
            var webSocketBridge = new channels.WebSocketBridge();
            webSocketBridge.connect(ws_path);
            webSocketBridge.listen();
            $("button").click(function () {
                console.log("Create!");
                webSocketBridge.stream('position').send({
                    "pk": 1,
                    "action": "create",
                    "data": {
                        "x": 1,
                        "y": 2,
                        "z": 3
                    }
                });
            });
            // Helpful debugging
            webSocketBridge.socket.addEventListener('open', function() { console.log("Connected to notification socket"); });
            webSocketBridge.socket.addEventListener('close', function() { console.log("Disconnected to notification socket"); });
        });
    </script>
</body>
</html>
